---
import { getCollection } from "astro:content";

type Props = { series: string };
const { series } = Astro.props;
const posts = await getCollection("blog");
const postsInTheSameSeries = posts
  .filter((post) => post.data.series === series)
  .sort(
    // Latest article first
    (a, b) => b.data.publishedDate.valueOf() - a.data.publishedDate.valueOf(),
  );
---

<ul class="daisyui-menu w-full rounded-box bg-base-300">
  <li>
    <h2 class="daisyui-menu-title !mt-0">Series: {series}</h2>
  </li>
  {
    postsInTheSameSeries.map((post, index) => (
      <li>
        <span class="flex flex-row gap-4">
          {" "}
          {postsInTheSameSeries.length - index}.
          <a href={post.slug}>{post.data.readerTitle}</a>
        </span>
      </li>
    ))
  }
</ul>
